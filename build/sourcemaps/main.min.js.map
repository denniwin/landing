{"version":3,"sources":["main.js"],"names":["$","mask","cleavePrice","Cleave","delimiter","numeral","numeralIntegerScale","prefix","tailPrefix","numeralPositiveOnly","numeralThousandsGroupStyle","cleaveCount","validate","rules","email","required","maxlength","phone","minlength","errorPlacement","error","element","errorClass","validClass","submitHandler","form","event","preventDefault","$sendValue","serialize","ajax","url","method","dataType","data","success","fancybox","open","src","type","find","remove","trigger","text","slider","alert","window","keyup","e","target","keyCode","length","parent","addClass","focusout","this","removeClass","on","toggleClass","$row","closest","$input","step","val","parseFloat","hasClass","setRawValue","animate","range","min","max","value","slide","ui","priceInt","parseInt","getRawValue","click","$selectContainer","textBase","trim","textItem","document","each","attr","show","hide","$value","split","append","tags","result","push","key","join","fadeOut","dropZone","sendFiles","files","Data","FormData","index","file","size","name","focus","dx","pageX","offset","left","dy","pageY","top","width","height","originalEvent","dataTransfer","change"],"mappings":"AACAA,EAAE,UAAUC,KAAK,oBAGjB,IAAIC,YAAc,IAAIC,OAAO,SAAU,CACrCC,UAAW,IACXC,SAAS,EACTC,oBAAqB,GACrBC,OAAQ,KACRC,YAAY,EACZC,qBAAqB,EACrBC,2BAA4B,aAI1BC,YAAc,IAAIR,OAAO,SAAU,CACrCC,UAAW,IACXC,SAAS,EACTC,oBAAqB,EACrBC,OAAQ,MACRC,YAAY,EACZC,qBAAqB,EACrBC,2BAA4B,aAI9BV,EAAE,UAAUY,SAAS,CACnBC,MAAO,CACLC,MAAO,CACLC,UAAU,EACVD,OAAO,EACPE,UAAW,IAGbC,MAAO,CACLF,UAAU,EACVG,UAAW,KAIjBC,eAAgB,SAASC,EAAOC,KAChCC,WAAa,uBACbC,WAAa,uBACbC,cAAe,SAASC,EAAMC,GAAQA,EAAMC,iBAC1C,IAAIC,EAAa5B,EAAE,UAAU6B,YAC7B7B,EAAE8B,KAAK,CACLC,IAAK,sBACLC,OAAQ,OACRC,SAAU,OACVC,KAAMN,EACNO,QAAS,SAASD,GACH,OAATA,GACFlC,EAAEoC,SAASC,KAAK,CACdC,IAAK,UACLC,KAAM,WAERvC,EAAE,UAAUwC,KAAK,SAASC,SAC1BzC,EAAE,UAAUwC,KAAK,oBAAoBC,SACrCzC,EAAE,UAAU0C,QAAQ,SACpB1C,EAAE,oDAAoD2C,KAAK,SAC3D3C,EAAE,uBAAuB4C,OAAQ,QAAS,IAE5CC,MAAM,gEAOZ7C,EAAE8C,QAAQC,OAAM,SAASC,GACxB,IAAIC,EAASjD,EAAE,yBACE,GAAbgD,EAAEE,SAAgBlD,EAAEiD,GAAQE,QAC/BnD,EAAEiD,GAAQG,SAASC,SAAS,cAI9BrD,EAAE,mBAAmBsD,UAAS,WAC7BtD,EAAEuD,MAAMH,SAASI,YAAY,cAK9BxD,EAAE,kBAAkByD,GAAG,SAAS,SAAST,GACvCA,EAAErB,iBACF,IAAIgB,EAAO3C,EAAEuD,MAAMZ,OACnB3C,EAAEuD,MAAMG,YAAY,wBACpB1D,EAAEuD,MAAMZ,KAAa,aAARA,EAAsB,YAAc,gBAIlD3C,EAAE,QAAQyD,GAAG,QAAS,iCAAiC,WACtD,IAAIE,EAAO3D,EAAEuD,MAAMK,QAAQ,WACvBC,EAASF,EAAKnB,KAAK,iBACnBsB,EAAOH,EAAKzB,KAAK,QACjB6B,EAAMC,WAAWH,EAAOE,OAY5B,OAXI/D,EAAEuD,MAAMU,SAAS,iBACpBF,GAAOD,EAEPC,GAAOD,EAGFC,EAAM,EACRpD,YAAYuD,YAAY,KAExBvD,YAAYuD,YAAYH,IAErB,KAIT/D,GAAE,WACAA,EAAE,uBAAuB4C,OAAO,CAC9BuB,QAAS,OACTC,MAAM,MACNC,IAAK,IACLC,IAAK,IACLC,MAAO,EACPT,KAAM,IACNU,MAAO,SAAS9C,EAAO+C,GACrBvE,YAAYgE,YAAYO,EAAGF,UAI/BvE,EAAE,UAAUyD,GAAG,SAAS,WACtB,IAAIiB,EAAWC,SAASzE,YAAY0E,eACpC5E,EAAE,uBAAuB4C,OAAO,CAAC2B,MAASG,UAM9C1E,EAAE,sBAAsB6E,OAAM,WAC5B7E,EAAEuD,MAAMH,SAASM,YAAY,kBAG/B1D,EAAE,kCAAkC6E,OAAM,WACxC,IAAIC,EAAoB9E,EAAEuD,MAAMH,SAASA,SAASA,SAC9C2B,EAAW/E,EAAE,sBAAsB2C,OAAOqC,OAC1CC,EAAWjF,EAAEuD,MAAMf,KAAK,kBAAkBG,OAC9CmC,EAAiBtC,KAAK,SAASuB,IAAIkB,GACnCH,EAAiBtC,KAAK,qCAAqCG,KAAKsC,GAChEjF,EAAEuD,MAAMf,KAAK,kBAAkBG,KAAKoC,GACpC/E,EAAE,gBAAgBwD,YAAY,kBAGhCxD,EAAEkF,UAAUL,OAAM,SAAS7B,GACzBhD,EAAE,gBAAgBmF,MAAK,WACgB,GAAjCnF,EAAEuD,MAAMf,KAAKQ,EAAEC,QAAQE,QACzBnD,EAAEuD,MAAMC,YAAY,qBAM1BxD,EAAE,QAAQyD,GAAG,QAAS,qBAAqB,WAElB,aADFzD,EAAE,oBAAoBoF,KAAK,SAE9CpF,EAAE,oBAAoBoF,KAAK,OAAQ,QACnCpF,EAAE,YAAYqF,KAAK,KACnBrF,EAAE,WAAWsF,KAAK,OAElBtF,EAAE,oBAAoBoF,KAAK,OAAQ,YACnCpF,EAAE,YAAYsF,KAAK,KACnBtF,EAAE,WAAWqF,KAAK,SAKtBrF,EAAE,yCAAyCyD,GAAG,SAAS,SAAST,GAC9DA,EAAErB,iBACF3B,EAAE,oBAAoBwD,YAAY,mBAClCxD,EAAEuD,MAAMF,SAAS,sBAGnBrD,EAAE,0CAA0CyD,GAAG,SAAS,SAAST,GAC/DA,EAAErB,iBACF3B,EAAE,oBAAoBwD,YAAY,mBAClCxD,EAAEuD,MAAMF,SAAS,sBAGnBrD,EAAE,4CAA4CyD,GAAG,SAAS,SAAST,GACjEA,EAAErB,iBACF3B,EAAE,oBAAoBwD,YAAY,mBAClCxD,EAAEuD,MAAMF,SAAS,sBAGnBrD,EAAE,yCAAyCyD,GAAG,SAAS,SAAST,GAC9DA,EAAErB,iBACF3B,EAAE,oBAAoBwD,YAAY,mBAClCxD,EAAEuD,MAAMF,SAAS,sBAKnBrD,EAAE,WAAWyD,GAAG,SAAS,WACrB,IAAI8B,EAASvF,EAAEuD,MAAMQ,MAAMyB,MAAM,MAC7BD,EAAOpC,OAAS,IAClBnD,EAAEuD,MAAMQ,IAAI,IACZ/D,EAAE,SAASyF,OAAO,qDAAqDF,EAAO,yGAGhF,IAAIG,EAAO,GACPC,EAAS,GACT3F,EAAEuD,MAAMQ,MAAMZ,OAAS,GACzBuC,EAAKE,KAAK,GAAG5F,EAAE,WAAW+D,OAE5B/D,EAAE,gBAAgBmF,MAAK,SAASU,EAAKtB,GACnCmB,EAAKE,KAAK,GAAG5F,EAAEuE,GAAO5B,WAGxBgD,EAASD,EAAKI,KAAK,MACnB9F,EAAE,SAAS+D,IAAI4B,MAKnB3F,EAAEkF,UAAUzB,GAAG,QAAQ,iBAAiB,WACtCzD,EAAEuD,MAAMH,SAAS2C,QAAS,KAAK,WAC/B/F,EAAEuD,MAAMd,eAKV,IAAIuD,SAAWhG,EAAE,kBA0CjB,SAASiG,UAAUC,GACjB,IACIC,EAAO,IAAIC,SACfpG,EAAEkG,GAAOf,MAAK,SAASkB,EAAOC,GACvBA,EAAKC,MAHM,UAGiC,aAAbD,EAAK/D,MAAsC,cAAb+D,EAAK/D,QACrE4D,EAAKV,OAAO,WAAYa,GACxBtG,EAAE,WAAWyF,OAAO,iJAAiJa,EAAKE,oGA9ChLxG,EAAE,kBAAkByG,OAAM,WACxBzG,EAAE,SAASqD,SAAS,YAErBC,UAAS,WACRtD,EAAE,SAASwD,YAAY,YAGzBwC,SAASvC,GAAG,4DAA4D,WACtE,OAAO,KAGTuC,SAASvC,GAAG,sBAAsB,WAChCuC,SAAS3C,SAAS,eAGpB2C,SAASvC,GAAG,aAAa,SAAST,GAChC,IAAI0D,EAAK1D,EAAE2D,MAAQX,SAASY,SAASC,KACjCC,EAAK9D,EAAE+D,MAAQf,SAASY,SAASI,KAChCN,EAAK,GAAOA,EAAKV,SAASiB,SAAaH,EAAK,GAAOA,EAAKd,SAASkB,WACpElB,SAASxC,YAAY,eAIzBwC,SAASvC,GAAG,QAAQ,SAAST,GAC3BgD,SAASxC,YAAY,YAErByC,UADYjD,EAAEmE,cAAcC,aAAalB,UAI3ClG,EAAE,kBAAkBqH,QAAO,WAEzBpB,UADY1C,KAAK2C,UAInBlG,EAAEkF,UAAUzB,GAAG,QAAQ,2BAA2B,WAClDzD,EAAEuD,MAAMH,SAAS2C,QAAS,KAAK,WAC/B/F,EAAEuD,MAAMd","file":"../js/main.min.js","sourcesContent":["//Mask telephone\r\n$('#phone').mask('+7 999 999-99-99');\r\n\r\n//Mask price\r\nvar cleavePrice = new Cleave('#price', {\r\n  delimiter: ' ',\r\n  numeral: true,\r\n  numeralIntegerScale: 10,\r\n  prefix: ' ₽',\r\n  tailPrefix: true,\r\n  numeralPositiveOnly: true,\r\n  numeralThousandsGroupStyle: 'thousand'\r\n});\r\n\r\n//Mask count\r\nvar cleaveCount = new Cleave('#count', {\r\n  delimiter: ' ',\r\n  numeral: true,\r\n  numeralIntegerScale: 8,\r\n  prefix: ' м²',\r\n  tailPrefix: true,\r\n  numeralPositiveOnly: true,\r\n  numeralThousandsGroupStyle: 'thousand'\r\n});\r\n\r\n//Validate field\r\n$(\".order\").validate({\r\n  rules: {\r\n    email: {\r\n      required: true,\r\n      email: true,\r\n      maxlength: 30\r\n    },\r\n\r\n    phone: {\r\n      required: true,\r\n      minlength: 16\r\n    },\r\n\r\n},\r\nerrorPlacement: function(error, element) {   },\r\nerrorClass : 'field__control_error',\r\nvalidClass : 'field__control_valid',\r\nsubmitHandler: function(form, event) {event.preventDefault()\r\n  let $sendValue = $('.order').serialize();\r\n  $.ajax({\r\n    url: './conf/telegram.php',\r\n    method: 'POST',\r\n    dataType: 'html',\r\n    data: $sendValue,\r\n    success: function(data){\r\n      if (data === 'ok') {\r\n        $.fancybox.open({\r\n          src: '#hidden',\r\n          type: 'inline'\r\n        });\r\n        $('.order').find('.tags').remove();\r\n        $('.order').find('.attach__content').remove();\r\n        $('.order').trigger('reset');\r\n        $('.order .select .select__item_base .select__value').text('Любые');\r\n        $('.slider_under-price').slider( \"value\", 0 );\r\n      } else \r\n      alert('Произошла ошибка, проверьте корректность ввода данных.');\r\n    }\r\n  });\r\n}\r\n});\r\n\r\n//Checkbox \r\n$(window).keyup(function(e){\r\n\tvar target = $('.checkbox input:focus');\r\n\tif (e.keyCode == 9 && $(target).length){\r\n\t\t$(target).parent().addClass('focused');\r\n\t}\r\n});\r\n\r\n$('.checkbox input').focusout(function(){\r\n\t$(this).parent().removeClass('focused');\r\n});\r\n\r\n\r\n//\r\n$('.table__button').on('click', function(e) {\r\n  e.preventDefault();\r\n  let text = $(this).text();\r\n  $(this).toggleClass('table__button_active');\r\n  $(this).text(text == \"В корзину\" ? \"В корзине\" : \"В корзину\");\r\n});\r\n\r\n//Counter\r\n\t$('body').on('click', '.number__minus, .number__plus', function(){\r\n\t\tvar $row = $(this).closest('.number');\r\n\t\tvar $input = $row.find('.number__text');\r\n\t\tvar step = $row.data('step');\r\n\t\tvar val = parseFloat($input.val());\r\n\t\tif ($(this).hasClass('number__minus')) {\r\n\t\t\tval -= step;\r\n\t\t} else {\r\n\t\t\tval += step;\r\n\t\t}\r\n\r\n    if (val < 0) {\r\n      cleaveCount.setRawValue('0');\r\n    } else {\r\n      cleaveCount.setRawValue(val);\r\n    }\r\n\t\treturn false;\r\n\t});\r\n\r\n//Slider for input\r\n$(function(){\r\n  $('.slider_under-price').slider({\r\n    animate: \"slow\",\r\n    range:'min',\r\n    min: 10000000,\r\n    max: 40000000,\r\n    value: 0,\r\n    step: 1000,\r\n    slide: function(event, ui){\r\n      cleavePrice.setRawValue(ui.value);\r\n    }\r\n  });\r\n\r\n  $('#price').on('input', function(){\r\n    let priceInt = parseInt(cleavePrice.getRawValue());\r\n    $(\".slider_under-price\").slider({'value': priceInt});\r\n  }); \r\n});\r\n\r\n\r\n//Show select menu\r\n$(\".select__item_base\").click(function(){\r\n  $(this).parent().toggleClass(\"select_open\");\r\n})\r\n\r\n$(\".select__options .select__item\").click(function(){\r\n  let $selectContainer =  $(this).parent().parent().parent();\r\n  let textBase = $('.select__item_base').text().trim();\r\n  let textItem = $(this).find(\".select__value\").text();\r\n  $selectContainer.find(\"input\").val(textItem);\r\n  $selectContainer.find(\".select__item_base .select__value\").text(textItem);\r\n  $(this).find(\".select__value\").text(textBase)\r\n  $(\".select_open\").removeClass(\"select_open\");\r\n})\r\n  \r\n$(document).click(function(e){\r\n  $(\".select_open\").each(function(){\r\n    if( $(this).find(e.target).length == 0){\r\n      $(this).removeClass(\"select_open\");\r\n    }\r\n  })\r\n})\r\n\r\n//Show-hide icon password\r\n$('body').on('click', '.password__button', function(){\r\n  let $passwordField = $('.password__field').attr('type');\r\n  if ($passwordField === 'password') {\r\n    $('.password__field').attr('type', 'text');\r\n    $('.eye-off').show(200);\r\n    $('.eye-on').hide(200);\r\n  } else {\r\n    $('.password__field').attr('type', 'password');\r\n    $('.eye-off').hide(200);\r\n    $('.eye-on').show(200);\r\n  }\r\n})\r\n\r\n//Filtered slide\r\n$('.gallery__button.gallery__button_bath').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n$('.gallery__button.gallery__button_sauna').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n$('.gallery__button.gallery__button_hammams').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n$('.gallery__button.gallery__button_swim').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n\r\n//Create array for post\r\n$('#wishes').on('input', function(){\r\n    let $value = $(this).val().split(', ');\r\n    if ($value.length > 1 ) {\r\n      $(this).val('');\r\n      $('.tags').append(`<div class=\"tags__item\"><span class=\"tags__value\">${$value[0]}</span><span class=\"tags__delete\"><img src=\"./img/Icon_delete.svg\" alt=\"Icon_delete\"></span></div>`);\r\n    }\r\n  \r\n    let tags = [];\r\n    let result = '';\r\n    if ($(this).val().length > 3) {\r\n      tags.push(`${$('#wishes').val()}`)\r\n    } \r\n    $('.tags__value').each(function(key, value) {\r\n      tags.push(`${$(value).text()}`);\r\n    })\r\n\r\n    result = tags.join(', ');\r\n    $('#tags').val(result);\r\n\r\n})\r\n\r\n//Delete tags\r\n$(document).on('click','.tags__delete', (function(){\r\n  $(this).parent().fadeOut (200, function() {\r\n  $(this).remove();\r\n})\r\n}))\r\n\r\n//upload\r\nvar dropZone = $('.attach__title');\r\n\r\n$('.attach__input').focus(function() {\r\n  $('label').addClass('focus');\r\n})\r\n.focusout(function() {\r\n  $('label').removeClass('focus');\r\n});\r\n\r\ndropZone.on('drag dragstart dragend dragover dragenter dragleave drop', function(){\r\n  return false;\r\n});\r\n\r\ndropZone.on('dragover dragenter', function() {\r\n  dropZone.addClass('dragover');\r\n});\r\n\r\ndropZone.on('dragleave', function(e) {\r\n  let dx = e.pageX - dropZone.offset().left;\r\n  let dy = e.pageY - dropZone.offset().top;\r\n  if ((dx < 0) || (dx > dropZone.width()) || (dy < 0) || (dy > dropZone.height())) {\r\n    dropZone.removeClass('dragover');\r\n  }\r\n});\r\n\r\ndropZone.on('drop', function(e) {\r\n  dropZone.removeClass('dragover');\r\n  let files = e.originalEvent.dataTransfer.files;\r\n  sendFiles(files);\r\n});\r\n\r\n$('.attach__input').change(function() {\r\n  let files = this.files;\r\n  sendFiles(files);\r\n});\r\n\r\n$(document).on('click','.attach__content_delete', (function(){\r\n$(this).parent().fadeOut (200, function() {\r\n$(this).remove();\r\n})\r\n}))\r\n\r\nfunction sendFiles(files) {\r\n  let maxFileSize = 5242880;\r\n  let Data = new FormData();\r\n  $(files).each(function(index, file) {\r\n    if ((file.size <= maxFileSize) && ((file.type == 'image/png') || (file.type == 'image/jpeg'))) {\r\n      Data.append('images[]', file);\r\n      $('.attach').append(`<div class=\"attach__content\"><div class=\"attach__content_delete\"><img src=\"./img/x-close.svg\" alt=\"x\"></div><div class=\"attach__content_name\">${file.name}</div><progress class=\"attach__content_progress\" value=\"100\" max=\"100\"></progress></div>`);\r\n    }\r\n  });\r\n}\r\n\r\n"]}