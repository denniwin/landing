{"version":3,"sources":["main.js"],"names":["$","mask","cleavePrice","Cleave","delimiter","numeral","numeralIntegerScale","prefix","tailPrefix","numeralPositiveOnly","numeralThousandsGroupStyle","cleaveCount","validate","rules","email","required","maxlength","phone","minlength","errorPlacement","error","element","errorClass","validClass","submitHandler","form","event","preventDefault","$sendValue","serialize","ajax","url","method","dataType","data","success","fancybox","open","src","type","find","remove","trigger","removeClass","slider","alert","window","keyup","e","target","keyCode","length","parent","addClass","focusout","this","on","$row","closest","$input","step","val","parseFloat","hasClass","setRawValue","animate","range","min","max","value","slide","ui","priceInt","parseInt","getRawValue","items","s","oneBig","each","key","w","append","click","toggleClass","$selectContainer","textBase","text","trim","textItem","document","attr","show","hide","$value","split","tags","result","push","join","fadeOut","dropZone","sendFiles","files","Data","FormData","index","file","size","name","focus","dx","pageX","offset","left","dy","pageY","top","width","height","originalEvent","dataTransfer","change"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["//Mask telephone\r\n$('#phone').mask('+7 999 999-99-99');\r\n\r\n//Mask price\r\nvar cleavePrice = new Cleave('#price', {\r\n  delimiter: ' ',\r\n  numeral: true,\r\n  numeralIntegerScale: 10,\r\n  prefix: ' ₽',\r\n  tailPrefix: true,\r\n  numeralPositiveOnly: true,\r\n  numeralThousandsGroupStyle: 'thousand'\r\n});\r\n\r\n//Mask count\r\nvar cleaveCount = new Cleave('#count', {\r\n  delimiter: ' ',\r\n  numeral: true,\r\n  numeralIntegerScale: 8,\r\n  prefix: ' м²',\r\n  tailPrefix: true,\r\n  numeralPositiveOnly: true,\r\n  numeralThousandsGroupStyle: 'thousand'\r\n});\r\n\r\n//Validate field\r\n$(\".order\").validate({\r\n  rules: {\r\n    email: {\r\n      required: true,\r\n      email: true,\r\n      maxlength: 30\r\n    },\r\n\r\n    phone: {\r\n      required: true,\r\n      minlength: 16\r\n    },\r\n\r\n},\r\nerrorPlacement: function(error, element) {   },\r\nerrorClass : 'field__control_error',\r\nvalidClass : 'field__control_valid',\r\nsubmitHandler: function(form, event) {event.preventDefault()\r\n  let $sendValue = $('.order').serialize();\r\n  $.ajax({\r\n    url: './conf/telegram.php',\r\n    method: 'POST',\r\n    dataType: 'html',\r\n    data: $sendValue,\r\n    success: function(data){\r\n      if (data === 'ok') {\r\n        $.fancybox.open({\r\n          src: '#hidden',\r\n          type: 'inline'\r\n        });\r\n        $('.order').find('.tags').remove();\r\n        $('.order').find('.attach__content').remove();\r\n        $('.order').trigger('reset');\r\n        $('.field__control').removeClass('field__control_valid')\r\n        $('.slider_under-price').slider( \"value\", 0 );\r\n      } else alert('Произошла ошибка, проверьте корректность ввода данных.');\r\n    }\r\n  });\r\n}\r\n});\r\n\r\n//Checkbox \r\n$(window).keyup(function(e){\r\n\tvar target = $('.checkbox input:focus');\r\n\tif (e.keyCode == 9 && $(target).length){\r\n\t\t$(target).parent().addClass('focused');\r\n\t}\r\n});\r\n\r\n$('.checkbox input').focusout(function(){\r\n\t$(this).parent().removeClass('focused');\r\n});\r\n\r\n//Counter\r\n\t$('body').on('click', '.number__minus, .number__plus', function(){\r\n\t\tvar $row = $(this).closest('.number');\r\n\t\tvar $input = $row.find('.number__text');\r\n\t\tvar step = $row.data('step');\r\n\t\tvar val = parseFloat($input.val());\r\n\t\tif ($(this).hasClass('number__minus')) {\r\n\t\t\tval -= step;\r\n\t\t} else {\r\n\t\t\tval += step;\r\n\t\t}\r\n\r\n    if (val < 0) {\r\n      cleaveCount.setRawValue('0');\r\n    } else {\r\n      cleaveCount.setRawValue(val);\r\n    }\r\n\t\treturn false;\r\n\t});\r\n\r\n//Slider for input\r\n$(function(){\r\n  $('.slider_under-price').slider({\r\n    animate: \"slow\",\r\n    range:'min',\r\n    min: 0,\r\n    max: 4000000,\r\n    value: 0,\r\n    step: 1000,\r\n    slide: function(event, ui){\r\n      cleavePrice.setRawValue(ui.value);\r\n    }\r\n  });\r\n\r\n  $('#price').on('input', function(){\r\n    let priceInt = parseInt(cleavePrice.getRawValue());\r\n    $(\".slider_under-price\").slider({'value': priceInt});\r\n  }); \r\n});\r\n\r\n//label for slider\r\n  var items = ['10','20','30','40+'];\r\n  var s = $(\".slider_under-price\");\r\n\r\ns.slider({\r\n  min:1,\r\n  max:items.length,\r\n});\r\n\r\nvar oneBig = 100 / (items.length - 1);\r\n\r\n$.each(items, function(key,value){\r\n  var w = oneBig;\r\n  if (key === 0 || key === items.length-1)\r\n    w = oneBig/2;\r\n  $(\".legend\").append(`<label class=\"legend__label\" style='width: ${w}%'>${value}</label>`);\r\n});\r\n\r\n//Show select menu\r\n$(\".select__item_base\").click(function(){\r\n  $(this).parent().toggleClass(\"select_open\");\r\n})\r\n\r\n$(\".select__options .select__item\").click(function(){\r\n  let $selectContainer =  $(this).parent().parent().parent();\r\n  let textBase = $('.select__item_base').text().trim();\r\n  let textItem = $(this).find(\".select__value\").text();\r\n  $selectContainer.find(\"input\").val(textItem);\r\n  $selectContainer.find(\".select__item_base .select__value\").text(textItem);\r\n  $(this).find(\".select__value\").text(textBase)\r\n  $(\".select_open\").removeClass(\"select_open\");\r\n})\r\n  \r\n$(document).click(function(e){\r\n  $(\".select_open\").each(function(){\r\n    if( $(this).find(e.target).length == 0){\r\n      $(this).removeClass(\"select_open\");\r\n    }\r\n  })\r\n})\r\n\r\n//Show-hide icon password\r\n$('body').on('click', '.password__button', function(){\r\n  let $passwordField = $('.password__field').attr('type');\r\n  if ($passwordField === 'password') {\r\n    $('.password__field').attr('type', 'text');\r\n    $('.eye-off').show(200);\r\n    $('.eye-on').hide(200);\r\n  } else {\r\n    $('.password__field').attr('type', 'password');\r\n    $('.eye-off').hide(200);\r\n    $('.eye-on').show(200);\r\n  }\r\n})\r\n\r\n//Filtered slide\r\n$('.gallery__button.gallery__button_bath').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n$('.gallery__button.gallery__button_sauna').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n$('.gallery__button.gallery__button_hammams').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n$('.gallery__button.gallery__button_swim').on('click', function(e){\r\n  e.preventDefault()\r\n  $(\".gallery__button\").removeClass(\"gallery__active\");\r\n  $(this).addClass('gallery__active')\r\n  });\r\n\r\n\r\n//Create array for post\r\n$('#wishes').on('input', function(){\r\n  let $value = $(this).val().split(', ');\r\n  if ($value.length > 1 ) {\r\n    $(this).val('');\r\n    $('.tags').append(`<div class=\"tags__item\"><span class=\"tags__value\">${$value[0]}</span><span class=\"tags__delete\"><img src=\"./img/Icon_delete.svg\" alt=\"Icon_delete\"></span></div>`);\r\n  }\r\n\r\n  let tags = [];\r\n  let result = '';\r\n  $('.tags__value').each(function(key, value) {\r\n    tags.push(`${key + 1} - ${$(value).text()}`);\r\n  })\r\n  result = tags.join(', ');\r\n  $('#tags').val(result);\r\n})\r\n\r\n//Delete tags\r\n$(document).on('click','.tags__delete', (function(){\r\n  $(this).parent().fadeOut (200, function() {\r\n  $(this).remove();\r\n})\r\n}))\r\n\r\n//upload\r\nvar dropZone = $('.attach__title');\r\n\r\n$('.attach__input').focus(function() {\r\n  $('label').addClass('focus');\r\n})\r\n.focusout(function() {\r\n  $('label').removeClass('focus');\r\n});\r\n\r\ndropZone.on('drag dragstart dragend dragover dragenter dragleave drop', function(){\r\n  return false;\r\n});\r\n\r\ndropZone.on('dragover dragenter', function() {\r\n  dropZone.addClass('dragover');\r\n});\r\n\r\ndropZone.on('dragleave', function(e) {\r\n  let dx = e.pageX - dropZone.offset().left;\r\n  let dy = e.pageY - dropZone.offset().top;\r\n  if ((dx < 0) || (dx > dropZone.width()) || (dy < 0) || (dy > dropZone.height())) {\r\n    dropZone.removeClass('dragover');\r\n  }\r\n});\r\n\r\ndropZone.on('drop', function(e) {\r\n  dropZone.removeClass('dragover');\r\n  let files = e.originalEvent.dataTransfer.files;\r\n  sendFiles(files);\r\n});\r\n\r\n$('.attach__input').change(function() {\r\n  let files = this.files;\r\n  sendFiles(files);\r\n});\r\n\r\n$(document).on('click','.attach__content_delete', (function(){\r\n$(this).parent().fadeOut (200, function() {\r\n$(this).remove();\r\n})\r\n}))\r\n\r\nfunction sendFiles(files) {\r\n  let maxFileSize = 5242880;\r\n  let Data = new FormData();\r\n  $(files).each(function(index, file) {\r\n    if ((file.size <= maxFileSize) && ((file.type == 'image/png') || (file.type == 'image/jpeg'))) {\r\n      Data.append('images[]', file);\r\n      $('.attach').append(`<div class=\"attach__content\"><div class=\"attach__content_delete\"><img src=\"./img/x-close.svg\" alt=\"x\"></div><div class=\"attach__content_name\">${file.name}</div><progress class=\"attach__content_progress\" value=\"100\" max=\"100\"></progress></div>`);\r\n    }\r\n  });\r\n}\r\n\r\n"]}