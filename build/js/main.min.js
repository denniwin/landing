"use strict";

$("#phone").mask("+7 (999) 999-99-99");
var cleave = new Cleave("#price", {
  delimiter: " ",
  numeral: !0,
  numeralThousandsGroupStyle: "thousand"
});
$(document).ready(function () {
  $(".order").validate({
    rules: {
      email: {
        required: !0,
        email: !0,
        maxlength: 30
      },
      phone: {
        required: !0,
        minlength: 18
      }
    },
    errorPlacement: function errorPlacement(e, t) {},
    errorClass: "field__control_error",
    validClass: "field__control_valid",
    submitHandler: function submitHandler(e, t) {
      t.preventDefault();
    }
  }), $(".order").on("submit", function () {
    $sendValue = $(this).serialize(), $.ajax({
      url: "./conf/telegram.php",
      method: "POST",
      dataType: "html",
      data: $sendValue,
      success: function success(e) {
        "ok" === e ? (alert("Благодарим за обращение. Данные успешно приняты и отправлены менеджеру."), $(".order").reset()) : alert("Произошла ошибка, проверьте корректность ввода данных.");
      }
    });
  }), $(window).keyup(function (e) {
    var t = $(".checkbox-ios input:focus");
    9 == e.keyCode && $(t).length && $(t).parent().addClass("focused");
  }), $(".checkbox-ios input").focusout(function () {
    $(this).parent().removeClass("focused");
  }), $(document).ready(function () {
    $("body").on("click", ".number-minus, .number-plus", function () {
      var e = $(this).closest(".number"),
          t = e.find(".number-text"),
          s = e.data("step"),
          l = parseFloat(t.val());
      return $(this).hasClass("number-minus") ? l -= s : l += s, t.val(l), t.change(), !1;
    });
  }), $("#slick").slick({
    rows: 2,
    slidesToShow: 4,
    slidesToScroll: 4,
    adaptiveHeight: !0,
    arrows: !0,
    dots: !0,
    appendDots: $(".gallery__footer"),
    responsive: [{
      breakpoint: 700,
      settings: {
        rows: 2,
        slidesToShow: 2,
        slidesToScroll: 2
      }
    }]
  }), $(".gallery__button.bath").on("click", function (e) {
    e.preventDefault(), $(".gallery__button").removeClass("slick-active"), $(this).addClass("slick-active"), $("#slick").slick("slickGoTo", 1);
  }), $(".gallery__button.sauna").on("click", function (e) {
    e.preventDefault(), $(".gallery__button").removeClass("slick-active"), $(this).addClass("slick-active"), $("#slick").slick("slickGoTo", 5);
  }), $(".gallery__button.hammams").on("click", function (e) {
    e.preventDefault(), $(".gallery__button").removeClass("slick-active"), $(this).addClass("slick-active"), $("#slick").slick("slickGoTo", 9);
  }), $(".gallery__button.swim").on("click", function (e) {
    e.preventDefault(), $(".gallery__button").removeClass("slick-active"), $(this).addClass("slick-active"), $("#slick").slick("slickGoTo", 13);
  }), $(function () {
    $(".slider_under-price").slider({
      min: 0,
      max: 4e6,
      value: 0,
      step: 1e3,
      slide: function slide(e, t) {
        $("#price").val(t.value);
      }
    });
  });
  var e = ["10", "20", "30", "40+"];
  $(".slider_under-price").slider({
    min: 1,
    max: e.length
  });
  var t = 100 / (e.length - 1);
  $.each(e, function (s, l) {
    var a = t;
    0 !== s && s !== e.length - 1 || (a = t / 2), $(".legend").append("<label class=\"legend__label\" style='width: ".concat(a, "%'>").concat(l, "</label>"));
  }), $(".select__item_base").click(function () {
    $(this).parent().toggleClass("select_open");
  }), $(".select__options .select__item").click(function () {
    $selectContainer = $(this).parent().parent().parent();
    var e = $(this).find(".select__value").text();
    $selectContainer.find("input").val(e), $selectContainer.find(".select__item_base .select__value").text(e), $(".select_open").removeClass("select_open");
  }), $(document).click(function (e) {
    $(".select_open").each(function () {
      0 == $(this).find(e.target).length && $(this).removeClass("select_open");
    });
  });
}), $("body").on("click", ".password__button", function () {
  $passwordField = $(".password__field").attr("type"), "password" === $passwordField ? ($(".password__field").attr("type", "text"), $(".eye-off").show(200), $(".eye-on").hide(200)) : ($(".password__field").attr("type", "password"), $(".eye-off").hide(200), $(".eye-on").show(200));
}), $("#wishes").on("input", function () {
  $value = $(this).val().split(" "), $value.length > 1 && ($(this).val(""), tags = [], result = "", $(".tags__item").each(function (e, t) {
    tags.push($(t).text()), result = tags.join(","), $("#tags").val(result), console.log($("#tags").val());
  }), $(".tags").append("<div class=\"tags__item\"><span class=\"tags__value\">".concat($value[0], "</span><span class=\"tags__delete\"><img src=\"./img/Icon_delete.svg\" alt=\"Icon_delete\"></span></div>")));
}), $(".table__button").click(function (e) {
  e.preventDefault(), $("html").animate({
    scrollTop: $(".order").offset().top + 50
  }), arr = [], $price = $(this).parent().parent().find("td:nth(2)").text(), arr = $price.split(" х "), $area = arr.reduce(function (e, t) {
    return e + t;
  }) / 1e6, $("#name").val($(this).parent().parent().find("td:nth(0)").text()), $("#price").val($(this).parent().parent().find("td:nth(3)").text()), $("#count").val($area);
}), $(document).on("click", ".tags__delete", function () {
  $(this).parent().fadeOut(200, function () {
    $(this).remove();
  });
}), document.querySelector(".number-text").addEventListener("change", function () {
  var e = this.value;
  e && (e = e.replace(/ м²/g, ""), this.value = e + " м²");
}, !1);