"use strict";

$("#phone").mask("+7 999 999-99-99");
var cleavePrice = new Cleave("#price", {
  delimiter: " ",
  numeral: !0,
  numeralIntegerScale: 10,
  prefix: " ₽",
  tailPrefix: !0,
  numeralPositiveOnly: !0,
  numeralThousandsGroupStyle: "thousand"
}),
    cleaveCount = new Cleave("#count", {
  delimiter: " ",
  numeral: !0,
  numeralIntegerScale: 8,
  prefix: " м²",
  tailPrefix: !0,
  numeralPositiveOnly: !0,
  numeralThousandsGroupStyle: "thousand"
});
$(document).ready(function () {
  $(".order").validate({
    rules: {
      email: {
        required: !0,
        email: !0,
        maxlength: 30
      },
      phone: {
        required: !0,
        minlength: 16
      }
    },
    errorPlacement: function errorPlacement(e, t) {},
    errorClass: "field__control_error",
    validClass: "field__control_valid",
    submitHandler: function submitHandler(e, t) {
      t.preventDefault();
      var a = $(".order").serialize();
      $.ajax({
        url: "./conf/telegram.php",
        method: "POST",
        dataType: "html",
        data: a,
        success: function success(e) {
          "ok" === e ? (alert("Благодарим за обращение. Данные успешно приняты и отправлены менеджеру."), $(".order").find("input[type=text]").val("")) : alert("Произошла ошибка, проверьте корректность ввода данных.");
        }
      });
    }
  }), $(window).keyup(function (e) {
    var t = $(".checkbox-ios input:focus");
    9 == e.keyCode && $(t).length && $(t).parent().addClass("focused");
  }), $(".checkbox-ios input").focusout(function () {
    $(this).parent().removeClass("focused");
  }), $(document).ready(function () {
    $("body").on("click", ".number-minus, .number-plus", function () {
      var e = $(this).closest(".number"),
          t = e.find(".number-text"),
          a = e.data("step"),
          l = parseFloat(t.val());
      return $(this).hasClass("number-minus") ? l -= a : l += a, l < 0 ? t.val("0") : (t.val(l), t.change()), !1;
    });
  }), $(".js-slider").slick({
    rows: 2,
    slidesToShow: 4,
    slidesToScroll: 4,
    adaptiveHeight: !0,
    arrows: !0,
    dots: !0,
    appendDots: $(".gallery__footer"),
    responsive: [{
      breakpoint: 700,
      settings: {
        rows: 2,
        slidesToShow: 2,
        slidesToScroll: 2
      }
    }]
  }), $(function () {
    $(".slider_under-price").slider({
      animate: "slow",
      range: "min",
      min: 0,
      max: 4e6,
      value: 0,
      step: 1e3,
      slide: function slide(e, t) {
        $("#price").val(t.value);
      }
    }), $("#price").on("input", function () {
      var e = parseInt(cleavePrice.getRawValue());
      $(".slider_under-price").slider({
        value: e
      });
    });
  });
  var e = ["10", "20", "30", "40+"];
  $(".slider_under-price").slider({
    min: 1,
    max: e.length
  });
  var t = 100 / (e.length - 1);
  $.each(e, function (a, l) {
    var n = t;
    0 !== a && a !== e.length - 1 || (n = t / 2), $(".legend").append("<label class=\"legend__label\" style='width: ".concat(n, "%'>").concat(l, "</label>"));
  }), $(".select__item_base").click(function () {
    $(this).parent().toggleClass("select_open");
  }), $(".select__options .select__item").click(function () {
    var e = $(this).parent().parent().parent();
    var t = $(this).find(".select__value").text();
    e.find("input").val(t), e.find(".select__item_base .select__value").text(t), $(".select_open").removeClass("select_open");
  }), $(document).click(function (e) {
    $(".select_open").each(function () {
      0 == $(this).find(e.target).length && $(this).removeClass("select_open");
    });
  });
}), $("body").on("click", ".password__button", function () {
  "password" === $(".password__field").attr("type") ? ($(".password__field").attr("type", "text"), $(".eye-off").show(200), $(".eye-on").hide(200)) : ($(".password__field").attr("type", "password"), $(".eye-off").hide(200), $(".eye-on").show(200));
}), $(".gallery__button.gallery__button_bath").on("click", function (e) {
  e.preventDefault(), $(".gallery__button").removeClass("gallery__active"), $(this).addClass("gallery__active");
}), $(".gallery__button.gallery__button_sauna").on("click", function (e) {
  e.preventDefault(), $(".gallery__button").removeClass("gallery__active"), $(this).addClass("gallery__active");
}), $(".gallery__button.gallery__button_hammams").on("click", function (e) {
  e.preventDefault(), $(".gallery__button").removeClass("gallery__active"), $(this).addClass("gallery__active");
}), $(".gallery__button.gallery__button_swim").on("click", function (e) {
  e.preventDefault(), $(".gallery__button").removeClass("gallery__active"), $(this).addClass("gallery__active");
}), $("#wishes").on("input", function () {
  var e = $(this).val().split(", ");
  e.length > 1 && ($(this).val(""), $(".tags").append("<div class=\"tags__item\"><span class=\"tags__value\">".concat(e[0], "</span><span class=\"tags__delete\"><img src=\"./img/Icon_delete.svg\" alt=\"Icon_delete\"></span></div>")));
  var t = [],
      a = "";
  $(".tags__value").each(function (e, a) {
    t.push("".concat(e + 1, " - ").concat($(a).text()));
  }), a = t.join(", "), $("#tags").val(a);
}), $(document).on("click", ".tags__delete", function () {
  $(this).parent().fadeOut(200, function () {
    $(this).remove();
  });
}), $(document).ready(function () {
  var e = $(".attach__title");

  function t(t) {
    var a = new FormData();
    $(t).each(function (e, t) {
      t.size <= 5242880 && ("image/png" == t.type || "image/jpeg" == t.type) && (a.append("images[]", t), $(".attach").append("<div class=\"attach__content\"><div class=\"attach__content_delete\"><img src=\"./img/x-close.svg\" alt=\"x\"></div><div class=\"attach__content_name\">".concat(t.name, "</div><progress class=\"attach__content_progress\" value=\"100\" max=\"100\"></progress></div>")));
    }), $.ajax({
      url: e.attr("action"),
      type: e.attr("method"),
      data: a,
      contentType: !1,
      processData: !1,
      success: function success(e) {
        alert("Файлы были успешно загружены!");
      }
    });
  }

  $(".attach__input").focus(function () {
    $("label").addClass("focus");
  }).focusout(function () {
    $("label").removeClass("focus");
  }), e.on("drag dragstart dragend dragover dragenter dragleave drop", function () {
    return !1;
  }), e.on("dragover dragenter", function () {
    e.addClass("dragover");
  }), e.on("dragleave", function (t) {
    var a = t.pageX - e.offset().left,
        l = t.pageY - e.offset().top;
    (a < 0 || a > e.width() || l < 0 || l > e.height()) && e.removeClass("dragover");
  }), e.on("drop", function (a) {
    e.removeClass("dragover"), t(a.originalEvent.dataTransfer.files);
  }), $(".attach__input").change(function () {
    t(this.files);
  }), $(document).on("click", ".attach__content_delete", function () {
    $(this).parent().fadeOut(200, function () {
      $(this).remove();
    });
  });
}), jQuery(document).ready(function (e) {
  e(".JSslider").slickFilterable({
    filterName: "filter-heading",
    filter: function filter(t, a, l) {
      return e(this).hasClass(t);
    },
    slick: {
      rows: 2,
      slidesToShow: 4,
      slidesToScroll: 4,
      adaptiveHeight: !0,
      arrows: !0,
      dots: !0,
      appendDots: e(".gallery__footer"),
      responsive: [{
        breakpoint: 700,
        settings: {
          rows: 2,
          slidesToShow: 2,
          slidesToScroll: 2
        }
      }]
    }
  });
}), function (e) {
  e.fn.slickFilterable = function (t) {
    var a = e.extend({
      slideSelector: "> *",
      filterName: "filter-slick",
      slick: {},
      beforeFilter: function beforeFilter() {},
      filter: function filter(e, t, a, l) {
        return !0;
      }
    }, t);
    return this.each(function () {
      var t = e(this),
          l = t.find(a.slideSelector);
      t.slick(a.slick), e("[data-" + a.filterName + "]").on("click", function (n) {
        n.preventDefault();
        var i = e(this).data(a.filterName),
            s = e.extend(!0, {}, l);

        if (i) {
          if ("function" == typeof a.beforeFilter && a.beforeFilter.call(this, i, t, l), t.slick("unslick"), "all" === i) return t.find(a.slideSelector).remove(), t.append(s), void t.slick(a.slick);
          s = "function" != typeof a.filter ? s.filter(a.filter) : s.filter(function () {
            return a.filter.call(this, i, t, e.extend(!0, {}, a));
          }), t.find(a.slideSelector).remove(), t.append(s), t.slick(a.slick);
        }
      });
    });
  };
}(jQuery);